(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{2974:function(e,n,t){Promise.resolve().then(t.bind(t,4422))},2894:function(e,n,t){"use strict";t.d(n,{S:function(){return l}});var r=t(230),i=t(787);function u(){let e=(0,r._)(["\n  width: 60%;\n  height: 3rem;\n  border: 0;\n  border-radius: 0.8rem;\n  background-color: #9fd5b9;\n  cursor: pointer;\n\n  &:active {\n    transform-origin: center;\n    transform: scale(1.01);\n  }\n"]);return u=function(){return e},e}let l=i.Z.button(u())},5215:function(e,n,t){"use strict";t.d(n,{P:function(){return l}});var r=t(230),i=t(787);function u(){let e=(0,r._)(["\n  max-width: 76.8rem;\n  min-width: 48rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n  margin: 0 auto;\n  margin-top: 2rem;\n"]);return u=function(){return e},e}let l=i.Z.main(u())},4422:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return E}});var r=t(7437),i=t(2894),u=t(2265),l=t(5995);let s=(0,u.createContext)(null);var o=t(3979),c=t(6601);let a=(e=>{let n={quizIdx:0,isAnswerSelected:!1};return(0,o.M)()(e=>(c.p.add(()=>e(n)),{...n,incrementQuizIdx:()=>e(e=>{let{quizIdx:n}=e;return{quizIdx:++n}}),setIsAnswerSelected:n=>e({isAnswerSelected:n}),reset:()=>e(n)}))})(),d=(e,n)=>{var t;let r=null!==(t=(0,u.useContext)(s))&&void 0!==t?t:a;return(0,l.s)(r,e,n)},f=()=>d(e=>e);var m=t(2475);let p=e=>{let{question:n,answers:t,correctAnswer:r,numOfQuiz:i,startTime:l}=e,{isAnswerSelected:s,setIsAnswerSelected:o,quizIdx:c,reset:a}=f(),d=(0,m.Ky)(),[p,h]=(0,u.useState)(),x=(0,u.useRef)({numOfQuiz:i,startTime:l,reviewNotes:[],endTime:l}).current;(0,u.useEffect)(()=>function(){a()},[a]);let v=s&&p===r,g=s&&p!==r;return{handleFieldSetChange:e=>{if(!(e.target instanceof HTMLInputElement))return;let{value:u}=e.target;h(u),o(!0),u!==r&&x.reviewNotes.push({question:n,answers:t,correctAnswer:r,selectedAnswer:u}),c===i-1&&(x.endTime=Date.now(),d({...x}))},isAnswerSelected:s,isAnswerSelectedAndCorrect:v,isAnswerSelectedAndWrong:g}};var h=t(230),x=t(787);function v(){let e=(0,h._)(["\n  width: 60%;\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n"]);return v=function(){return e},e}function g(){let e=(0,h._)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n\n  & > legend {\n    font-size: 1.4rem;\n    margin-bottom: 1rem;\n  }\n\n  & > label {\n    font-size: 1.2rem;\n    display: flex;\n    gap: 0.6rem;\n    cursor: pointer;\n  }\n"]);return g=function(){return e},e}let w=x.Z.form(v()),j=x.Z.fieldset(g()),b=e=>{let{quiz:n}=e,{isAnswerSelected:t,handleFieldSetChange:i,isAnswerSelectedAndCorrect:u,isAnswerSelectedAndWrong:l}=p(n),{question:s,answers:o,correctAnswer:c}=n;return(0,r.jsxs)(w,{children:[(0,r.jsxs)(j,{disabled:t,onChange:i,children:[(0,r.jsx)("legend",{children:s}),o.map(e=>(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"radio",value:e}),e]},e))]}),u&&(0,r.jsx)("p",{children:"정답입니다."}),l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"오답입니다."}),(0,r.jsxs)("p",{children:["정답: ",c]})]})]})},y=e=>{let{numOfQuiz:n}=e,{quizIdx:t}=f();return(0,r.jsxs)("p",{children:[t+1,"/",n]})};var C=t(5215),S=t(5771),_=t(2835),z=t.n(_);let k=async()=>await (await fetch("https://opentdb.com/api.php?amount=5&type=multiple")).json(),N=["triviaQuestions"],O=(e,n)=>(0,S.a)({queryKey:N,queryFn:k,staleTime:5e3,refetchOnWindowFocus:!1,refetchOnReconnect:!1,select:e,enabled:n}),F=()=>O((0,u.useCallback)(e=>e.results.map(e=>{let{question:n,correct_answer:t,incorrect_answers:r}=e,i=z().decode(n),u=z().decode(t),l=r.map(e=>z().decode(e));return l.splice(Math.floor(Math.random()*(l.length+1)),0,u),{question:i,answers:l,correctAnswer:u}}),[]));var M=t(4033);let Q=e=>{let{handleWhileQuizPrepare:n,handleQuizError:t}=e,{data:r,isPending:i,isError:l,isFetching:s}=F(),{quizIdx:o,isAnswerSelected:c,setIsAnswerSelected:a,incrementQuizIdx:d}=f(),m=(0,M.useRouter)(),p=(0,u.useRef)(Date.now()).current;if(i||s)return n();if(l||(null==r?void 0:r.length)===0)return t();let h=r.length,x=o===h-1,v=()=>{x||d()},g=r[o];return{numOfQuiz:h,singleQuizInfo:g,startTime:p,isSelectedAndQuizLeftMore:c&&!x,propsForNextQuizButton:{onClick:()=>{a(!1),v()}},isSelectedAndDone:c&&x,propsForShowResultButton:{onClick:()=>{m.replace("/results?id=".concat(p))}}}},T=()=>(0,r.jsx)(C.P,{children:(0,r.jsx)("p",{children:"잠시 기다려 주세요."})}),q=()=>(0,r.jsx)(C.P,{children:(0,r.jsx)("p",{children:"잠시 후 다시 시도해 주세요."})}),A=e=>"props"in e;function E(){let e=Q({handleWhileQuizPrepare:T,handleQuizError:q});if(A(e))return e;let{numOfQuiz:n,singleQuizInfo:t,startTime:u,isSelectedAndQuizLeftMore:l,propsForNextQuizButton:s,isSelectedAndDone:o,propsForShowResultButton:c}=e,a={quiz:{...t,numOfQuiz:n,startTime:u}};return(0,r.jsxs)(C.P,{children:[(0,r.jsx)(y,{numOfQuiz:n}),(0,r.jsx)(b,{...a}),l&&(0,r.jsx)(i.S,{...s,children:"다음 문항 풀기"}),o&&(0,r.jsx)(i.S,{...c,children:"결과 보기"})]})}},6601:function(e,n,t){"use strict";t.d(n,{p:function(){return r}});let r=new Set},2475:function(e,n,t){"use strict";t.d(n,{Ky:function(){return d},Wg:function(){return p},fv:function(){return f},py:function(){return m}});var r=t(2265),i=t(5995);let u=(0,r.createContext)(null);var l=t(4810),s=t(3979),o=t(6601);let c=(e=>{let n={review:{}};return(0,s.M)()((0,l.tJ)(e=>(o.p.add(()=>e(n)),{...n,addReview:n=>e(e=>{let{review:t}=e;return{review:{[n.startTime]:n,...t}}})}),{name:"review-storage",storage:(0,l.FL)(()=>sessionStorage)}))})(),a=(e,n)=>{var t;let l=null!==(t=(0,r.useContext)(u))&&void 0!==t?t:c;return(0,i.s)(l,e,n)},d=()=>a(e=>{let{addReview:n}=e;return n}),f=()=>a(e=>{let{review:n}=e;return Object.keys(n)}),m=e=>a(n=>{let{review:t}=n;return t[e]?t[e].reviewNotes:null}),p=e=>a(n=>{let{review:t}=n,r=t[e];return r?{durationMs:r.endTime-r.startTime,numOfCorrectAnswer:r.numOfQuiz-r.reviewNotes.length,numOfWrongAnswer:r.reviewNotes.length}:null})}},function(e){e.O(0,[540,38,192,971,472,744],function(){return e(e.s=2974)}),_N_E=e.O()}]);